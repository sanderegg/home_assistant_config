- platform: kodi
  host: !secret ip_kodi_player
  port: !secret port_kodi_player
  turn_on_action:
    service: homeassistant.turn_on
    data:
      entity_id: switch.watch_film
  turn_off_action:
    service: homeassistant.turn_off
    data:
      entity_id: switch.watch_film
  
- platform: spotify
  client_id: !secret client_id_spotify_player
  client_secret: !secret secret_spotify_player
  name: VeroSpotify

# add the universal mediaplayer to override the turn_on/off actions not available in spotify component
- platform: universal
  name: Spotify
  children:
    - media_player.verospotify
  state_template: >
    {% if is_state('switch.kodi_switch', 'off')  %}
    off
    {% else %}
    {{ states('media_player.verospotify') }}
    {% endif %}        
  commands:
    turn_on:
      service: switch.turn_on
      data:
        entity_id: switch.kodi_switch
    turn_off:
      service: media_player.media_stop
      data:
        entity_id: media_player.verospotify    
